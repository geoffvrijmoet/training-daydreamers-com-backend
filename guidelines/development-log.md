here's what we've done up to 2025-05-07:

there is a mongodb collection for each of these: `clients`, `contact_form_submissions`, `qrCodes`, `report_cards`, `settings`. we have NOT set up a model for any of these yet.

there's a directory for each of these: `clients`, `qr-codes`, `report-cards`, `settings`. there's also `clients/new`, `report-cards/new`, `report-cards/[id]`, `clients/[id]`.

`report-cards/[id]` is a page that displays a report card. it has a sidebar that displays information about the client and the QR code. it takes the data from the report card document and displays it based on the formatting that we've specified for all report cards.

below is a JSON object that I copied and pasted from a mongodb report card document. it's a good example of the structure of the data that we'll be working with. of course I'm open to changes and suggestions, but only if they will truly be good for the long term and if we can take the time to make comprehensive changes to the entire codebase to be aligned with the changes.

```
{"_id":{"$oid":"674911d13271444c27f5a2bb"},"clientId":"674694871528db59b409ebcb","clientName":"Geoff Vrijmoet","dogName":"Stanley","date":"2024-11-28","summary":"asdf","keyConcepts":["Trigger Stacking"],"productRecommendations":[],"fileId":"1yFKc3yMlXpBuPgJSIirU01PphEcGi_GR8xVeE01yFVg","webViewLink":"https://docs.google.com/document/d/1yFKc3yMlXpBuPgJSIirU01PphEcGi_GR8xVeE01yFVg/edit?usp=drivesdk","createdAt":{"$date":{"$numberLong":"1732841937019"}}}
```

`settings` collection really just has one document: it's the settings where Madeline is storing the different things she likes to frequently add to report cards. below I've pasted the document as a JSON object so you can understand the structure of the data. of course, i'm open to changes and suggestions, but only if they will truly be good for the long term and if we can take the time to make comprehensive changes to the entire codebase to be aligned with the changes.

```
{"_id":{"$oid":"674782901528db59b409ebcc"},"type":"training_options","keyConcepts":[{"id":"1733516390054-9jwow6q4s","title":"Trigger Stacking","description":"<p>Stress tends to linger in our bodies until we've had a chance to decompress, so when we experience multiple stressors in a row we tend to escalate, and may overreact! The same is true for our dogs–this concept is called <a target=\"_blank\" rel=\"noopener noreferrer nofollow\" class=\"text-blue-500 hover:underline\" href=\"https://drive.google.com/file/d/1v8SPpCcMRo-NgoUvdQNCuv_UNH2HplhF/view?usp=sharing\">trigger stacking</a>! Be aware of all the stressors in your environment, like sounds, dogs, leash tension, etc.</p>"},{"id":"1733516390054-xvrlehstm","title":"Safety Around Children","description":"<p>My top recommendations for establishing safety in dog/child interactions are:</p><ol class=\"list-decimal ml-4\"><li class=\"pl-1\"><p>Establish a safe zone for your dog</p></li><li class=\"pl-1\"><p>Teach consent checks</p></li><li class=\"pl-1\"><p>Learn dog body language (and teach your children these signs when they are old enough) and intervene when you see any mild signs of stress from the dog</p></li></ol><p>Do <em>not </em>let children approach a dog who is eating, chewing, sleeping, or playing alone.</p>"},{"id":"1733516390054-sdwtuq8zb","title":"Nutrition 101","description":"<ul class=\"list-disc ml-4\"><li class=\"pl-1\"><p>Variety is key to a healthy gut! Most nutrition focused vets recommend regularly rotating your dog's food, both in protein source and even in brand. Think of it like this… sure you can survive off of pasta every day for your whole life, but would you thrive?? All animals require variety in their diet for optimal nutrition. Keep in mind that if your dog has eaten the same food for a long time you may need to do a slow transition to new foods.</p></li><li class=\"pl-1\"><p>Adding fresh food to a dog's diet can also help with their gut health! This also has a significant impact on dog allergies. When you can adding some fruits and vegetables, kefir, or sardines can make a huge difference. Dogs can have <em>most </em>of the food that we can. The only real exceptions are chocolate (duh… xylitol specifically is very toxic to dogs, and is in some peanut butters and other processed foods, so keep an eye out for that), grapes, onions, and macadamia nuts.&nbsp;</p></li><li class=\"pl-1\"><p>Dog's have zero nutritional requirement for carbs in their diet, yet 90% of kibble is PACKED with carbs to make it cheaper. It is my opinion (based in scientific research) that this is the reason for the obesity epidemic in the pet world.</p></li></ul>"},{"id":"1733516390054-dh8m62f47","title":"The R+ Philosophy of "No","description":"<p>The reason that I choose not to teach "no" or any sort of "corrective" methods is that it is not giving the dog the opportunity to make the right choice in the first place. In order to teach "no" the dog needs to make a mistake. In an ideal training world we are guiding our dogs (through cues and environmental management) to the right decisions in the first place. Always remember, most undesirable behaviors are only undesirable to the human. To the dog, they are perfectly natural! Additionally, when you punish a behavior you're really just suppressing it… suppressed behaviors will always find a way out.</p>"},{"id":"1733516390054-aamh4jxhj","title":"Raising/Lowering Criteria","description":"<p>Follow the 3 for 3 rule... In 3 rounds of training a behavior, if your dog nails it 3 out of 3 times you can increase difficulty. If they get 2 out of 3 stick to where you are. If they get 0-1 out of 3 make it easier.</p>"},{"id":"1733516390054-uc2insanv","title":"Body Language","description":"<p>As with all things we must consider context when looking at our dog's body language. Yawning could be stress, or they could be tired. Panting could be stress, or they could be hot. That said there are some subtle signs of stress that we can pay attention to! Pay lots of attention to all dogs body language, not just your own. At the start try to stick to objective observations, without applying judgment (aka "his tail is low, his ears are back" vs "he looks stressed"). Some common signs of subtle stress are lip licking, yawning, shaking off (aka shaking off the stress, sort of akin to a big sigh in humans after a stressful experience), exposing the belly, and turning away.</p>"},{"id":"1733516390054-9j7x2f57v","title":"Play","description":"<p>Play is always a conversation between the players, whether between dogs, or you playing with your dog. That's why it's absolutely critical to understand your dog's body language so you can avoid miscommunications in the conversation of play! Different dogs have different play styles (usually influenced at least in part by their breed): you've got the body slammers, the chasers, the mouthy dogs, and more. Pay attention to the play your dog engages in the most often, and cater your play style to them. Make sure your dog is nice and relaxed with loose body language, and take lots of breaks to manage arousal levels (see "break" cue for dog to dog play). Breaks can also be very helpful to make sure everyone is still having a good time– basically a consent check during play. Have fun with your dog!!</p>"},{"id":"1733516390054-fdk4jpqxo","title":"The Order of Events","description":"<p>The order in which we do things in training matters! We want our dogs to learn that x <em>predicts </em>y. Let's say your dog doesn't like towels… if you present the towel and then follow that with a treat your dog will learn that the towel predicts good stuff. If, however, you present a treat and then present the towel you may accidentally poison your reinforcer, having taught your dog that treats predict the arrival of something they don't like.&nbsp;</p>"},{"id":"1733516390054-hk33swc6t","title":"Three D's of Dog Training","description":"<p>Distance, Duration, and Distractions. These are the three pillars of criteria to raise and lower as needed for your dog to make progress. Remember, when you raise one pillar, it is helpful to lower the others to start.</p>"},{"id":"1733516390054-mc8e2yq6w","title":"Adding the Verbal Cue","description":"<p>We only add the verbal cue when we would bet $50 that your dog will do the behavior you're after. When you're at that stage, remember; the "order" in which we do things in training is crucial. When you add a verbal cue it should go: verbal cue, physical gesture/lure, behavior, mark and reward. This is because we are working with <em>predictive thinking. </em>We want your dog to learn "when they say x, y always happens!" and then they'll just skip over the middle part.&nbsp;</p><ul class=\"list-disc ml-4\"><li class=\"pl-1\"><p><em>Important: only say the verbal cue once. </em>The more often your dog hears a word with no consequences the less it means to them, so only say it when you believe your dog will respond, and then don't repeat it!! If they're struggling a bit when you prompt for the behavior using only the verbal cue, give your visual cue to help them out rather than repeating the cue.</p></li></ul>"},{"id":"1733516390054-xjqhlan59","title":"Enrichment","description":"<p>There are a ton of definitions out there, but the one I resonate with the most is "Enrichment is learning what our dogs' needs are and then structuring an environment for them that allows them, as much as is feasible, to meet those needs." (from: Canine Enrichment for the Real World). There are some basic dog needs, such as scavenging, sniffing, playing, exercise, learning, etc. Then there are some breed-specific needs, and individual dog needs. Pay attention to the types of activities that your dog is drawn to, and capitalize on that, by structuring safe outlets for them to express those needs.</p>"},{"id":"1733516390054-45lq5yfxj","title":"Classical Conditioning","description":"<p>In classical conditioning we are simply pairing stimuli together. It is <em>not</em> contingent on behavior. Think Pavlov's bell! Importantly for classical conditioning we are leaning on predictive thinking: x predicts y… bell predicts treat… nail clippers predict treat.</p>"},{"id":"1733516390054-qt28ip7ga","title":"Operant Conditioning","description":"<p>Operant conditioning, on the other hand, is contingent on behavior. If you <em>do</em> x, y will happen. If you sit, you will get a treat.</p>"},{"id":"1733516390054-tf0mhgei0","title":"Counterconditioning","description":"<p><em>Changing </em>the association of any given stimulus. When we are doing counter-conditioning we are typically relying on classical conditioning, meaning we are not asking our dogs to <em>do something </em>in order for the good stuff (treats or other rewards) to happen. The good stuff comes after the previously scary/stressful stimulus occurs.</p>"},{"id":"1733516390054-73as92oia","title":"Marker Training","description":"<p>Marker training can use a "clicker" or a verbal marker such as "yes". Remember, your goal is to mark the exact moment the dog does the behavior you're</p><p>after, to predict the delivery of the treat. It is important to mark before treating, because otherwise no association will be built between the sound and the delivery of the treat.</p>"},{"id":"1733516390054-tofglaich","title":"Thresholds","description":"<p>There are lots of definitions of thresholds, so it is helpful to outline specifically <em>which</em> thresholds we are working within. I follow Grisha Stewart's BAT training threshold model, which you can find attached <a target=\"_blank\" rel=\"noopener noreferrer\" class=\"text-blue-500 hover:underline\" href=\"https://drive.google.com/file/d/1ubxuSnviP92jyIxzAVW7z19lRa2mz0ki/view?usp=sharing\">here.</a> For our purposes we should be aiming to stay within level 1 and 2… curiosity, not panic. I have also put this chart in your client folder for easy access. Some sure signs that your dog is <em>above threshold</em> include: unwilling to take treats, no longer responding to known cues, frenetic movement/speeding up, and more.</p>"},{"id":"1733516390054-p62govvrc","title":"The Human End of the Leash","description":"<p>Our dogs can pick up on our own stress, and we all know that it is stressful to walk a reactive dog. That's why it is absolutely essential to take care of <em>yourself</em> before and during walks. Set yourself up for success by brainstorming ways to soothe yourself while on walks. Take some deep breaths, do a little yoga before your walks, apply some aroma therapy, whatever it may look like for you, find ways to cultivate a sense of calm and collect in yourself that you can pass along to your dog. Additionally, it may be helpful to "fake it til you make it" with your tone of voice and body language while handling your dog– our dogs tend to mirror our emotions, so being an example of calm amongst chaos can be incredibly useful.</p>"},{"id":"1733516390054-ak7ytappq","title":"Impulse Control/Frustration Tolerance","description":"<p>These terms have many definitions, and there are some subtle differences in the two, but for our purposes I will use them interchangeably. I like to think of impulse control as being able to take a beat and maintain our cool in arousing situations. As with all training skills we want to teach these skills at a Kindergarten level before advancing to elementary school, and middle school, and so forth. What I mean by this is, practice impulse control at home when no guests are around before attempting it when guests are there. One of the best ways to start building impulse control and frustration tolerance is through independent play, like work-to-eat toys!</p>"},{"id":"1733516390054-gzky9mxb5","title":"Resource Guarding","description":"<p>Dogs will guard all sorts of objects, from food, toys, people, and even sleeping spots. Some level of guarding is perfectly natural! It is a survival instinct. That said, it can escalate to aggression (real intent to do harm) if we aren't careful. Resource guarding is about proximity to the guarded object. Your dog is much more likely to guard something close to them, than something far away from them. Likewise, guarding reactions tend to be more severe if you approach your dog from further away! To minimize resource guarding, toss lots of treats near your dog while they are in possession of something they're allowed to have: that way they learn that your approach is not a <em>threat</em> but actually indicative of good things coming.</p>"},{"id":"1733516390054-13npes41m","title":"Good Stress vs Bad Stress","description":"<p>High levels of arousal activate the same part of our brain and body when they are "positive" or "negative" emotions… When we experience <em>high</em> levels of stress (whether good or bad) that stays in our body, sometimes for multiple days. Additionally, too much good stress can sometimes turn into bad stress… Think of a board game with friends that starts nice and fun, and escalates into conflict. Keep this in mind while navigating life with your Big Feelings Pup… especially on walks the goal should be neutrality and calm energy.</p>"},{"id":"1733516390054-071p774xe","title":"Canine Adolescence","description":"<p>Just like it is for humans, adolescence for dogs (with early adolescence typically taking place between 7-10 months) is a tumultuous time. Your dogs brain chemistry is going through some <em>major </em>changes during this period! This leads to <em>bigger </em>feelings,<em> </em>and <em>less stability.</em> On top of all that, the extinction memory is impaired during adolescence, meaning your dog is much more likely in this time to experience "single-event-learning," aka: if your dog has a bad experience in this time it is more likely to become hardwired. Now, we can't expect our adolescence dog to have <em>no </em>bad experiences, but we can do our best to support them through it, and read when they are too stressed to move forward.</p>"},{"id":"1733516390054-bx8tt65dg","title":"Ritualized Aggression vs "Real Fight","description":"<p>While dog conflict can look and sound very scary, 90% of the time it is actually "ritualized aggression." This is basic doggie conflict resolution… It's resolving an issue without putting the dogs in actual danger. Obviously, with smaller dogs there can be some surface level scratches just from the scuffle, but most often it looks much scarier than it is. That said, it's not fun!</p>"},{"id":"1733516390054-bg6en2i77","title":"Consent/Agency for Dogs!","description":"<p>Dogs (especially small dogs) are given very little say in their lives. It's our job to give them <em>more </em>access to choice so they can feel confident and secure. When it is safe to do so, allow your dog the freedom to make decisions for themselves. If your dog does not want to be touched, don't touch them. If your dog doesn't want to be picked up, don't pick them up. Likewise, if you see another person (or dog) interacting with your dog in a way that they don't like, be their advocate! Dogs unfortunately don't speak english, so it's our responsibility to tell people when our dog needs space. Give your dog autonomy and respect, in a world in which they have very little say in their lives.</p>"},{"id":"1733516390054-glvyftzzz","title":"Attention Seeking Behaviors","description":"<p>Attention seeking behaviors are <em>reinforced by attention. </em>Seems obvious, no? And yet our human instinct is to give "bad" attention, like saying "no!" or getting frustrated. The truth is, even though we interpret this as "negative" attention, to the dog it is still reinforcing. That's why it's critical to <em>remove attention </em>when you're facing these types of behaviors. It's always better to reinforce your dog before they escalate to rude attention seeking behaviors, but when you inevitably face the rudeness you must ignore/remove your attention, then reinforce for polite behavior instead. <a target=\"_blank\" rel=\"noopener noreferrer\" class=\"text-blue-500 hover:underline\" href=\"https://drive.google.com/file/d/13Jr5nlQ2FHeV3MUe5MPFPtgUs-1TtVD3/view?usp=sharing\">Beware of behavior chains!</a> Put a good amount of time between the attention seeking behavior and the reward, so your dog does not learn: bark bark bark, sit, get treat, and repeat.</p>"},{"id":"1733516390054-n1zeppg4k","title":"Human Boundary Setting","description":"<p>Everyone thinks they know what's best for your dog– don't listen to the noise! Focus on what <em>you </em>know is right for you and your dog with your training goals in mind. Setting boundaries with humans is hard, but it must be done, especially when your dog is relying on you to advocate for them. Be firm with other people to stick to your training plan.</p><ul class=\"list-disc ml-4\"><li class=\"pl-1\"><p>Phrases like, "she's contagious" or "she bites" (even if it's a lie) tend to be more effective than, "she's sort of nervous" or "she's not always friendly"</p></li></ul>"}],"productRecommendations":[{"id":"1736206400397","title":"Bully Stick","description":"","url":"https://daydreamersnyc.com/products/bully-stick-single-pack-tuesdays-natural-dog-company-06bulltkodf-bc?_pos=1&_sid=0236afa05&_ss=r"}],"gamesAndActivities":[{"id":"1733607326654","title":"The Mouse Game","description":"<p>Move a treat back and forth in sporadic movements, to encourage bringing out your dog's natural prey drive. Then toss the treat away and encourage them to <em>pounce</em> on the treat. <a target=\"_blank\" rel=\"noopener noreferrer\" class=\"text-blue-500 hover:underline\" href=\"https://drive.google.com/file/d/1sX5iKG83UN4Iqx08uYCdj1yj_la0F3Nc/view?usp=sharing\">Check out this example video!</a></p>"},{"id":"1733607286498","title":"The Play Well/Social Play","description":"<p>Social play is <em>conversational. </em>Make suggestions for types of play, and listen to your dogs suggestions of play styles. Lean into the silliness. The Play Way can be roughly defined as dog led play as a means of gradually exposing a dog to new/potentially scary stimuli, and as a measure for their emotional state. We also have the added benefit of relationship building, which is absolutely crucial in fear related cases.</p>","url":"https://drive.google.com/file/d/1dfZkf46Q5GUoutMjbD_SHr5wUcxfU4Tl/view?usp=drive_link"},{"id":"1733517240653","title":"Snuffling","description":"<p>Ahh, snuffle mats… one of my all time favorite dog activities. Snuffle mats encourage our dogs to express their scavenging and foraging instincts! For dogs sniffing actually <em>lowers their heart rate</em> which makes snuffling a great activity for helping our dogs calm down. Make it easy to start, put the treats in obvious places, and then as your dog starts to figure it out you can hide them even deeper into the snuffle toys that you either purchase or DIY (through items like towels, shag rugs, etc).</p>"},{"id":"1733517218515","title":"Lazy Find It","description":"<p>In lazy find it we simply chuck a treat down a long hallway, or to the other side of the room. Your dog has to go chase the treat, then when they come back to you, you chuck another one. This is a super simple way to incorporate more exercise into your dog's daily routine. It also helps fulfill the prey drive because of the <em>chase</em> and pounce effect.</p>"},{"id":"1733517197953","title":"Find It","description":"<p>This is the groundwork for more advanced nosework games for dogs. Simply say "find it" and toss a treat! We want our dog to be <em>using their nose</em> rather than just relying on seeing the treat be tossed, so as you build this skill you can eventually drop secret treats, call find it and use body language cues to help your dog find the treat just using their nose. Then they understand that find it will always mean there is a treat somewhere, even if they don't see you tossing it.</p>"},{"id":"1733517040652","title":"Swap to Slow Bowls & Puzzles","description":"<p>Our dog's mealtime is a great opportunity for some easy enrichment. Switch their bowl to a puzzle toy, slow feeder, or snuffle activity. Most dogs prefer to work for their food, anyway.</p><p></p><p>You may even find your dog is more interested in their food by making this switch!</p><p></p><p>Especially for dogs who scarf their food down too quickly, slow bowls are a literal life-saver. They help prevent the sometimes lethal "bloat," and avoid the unfortunate scarf-and-barf.</p>"},{"id":"1733516228187","title":"Tug","description":"<p>Tug is a collaborative game, not a competition! This makes it a great relationship building game for lots of dogs. To make tug easier on your dog's body make sure to play low to the ground so they aren't extending their back too much. Similarly, avoid holding the toy up high to avoid jumping, especially when on slippery floors. Play on carpets/rugs when possible. We can also train a formal "out" cue, to have your dog release the toy on command. This helps manage arousal levels during play, as well as make the experience safer for both you and the dog.</p>"},{"id":"1733516719929","title":"Tear/Shred/Shake","description":"<p>As long as your dog does not consume the toys that they destroy, giving them an outlet to express the innate behavior of "destroying their prey" is very beneficial. Especially for terriers, and other similar breeds who were bred for vermin control–these dogs were bred to jump quickly to the shake and dissect part of the prey-sequence, so shredding behavior is an excellent breed-specific enrichment opportunity. Try a toilet paper roll or paper towel roll with treats in it, or intentionally buy the cheapest dog toys you can find for your dog to experience the bliss of pure destruction.</p>"}],"homework":[],"trainingSkills":[{"id":"1733607526125","title":"Potty Training","description":"<p>Potty training is all about building our dog's <em>preferences</em> for potty zones. It is inherently reinforcing to go to the bathroom (it feels good to release!). This means that every time your dog successfully eliminates on a surface they are being reinforced for using that location as a potty spot. Because of this, it is critical that you set your dog up to have lots of success eliminating in "legal" places (whether outside, or on pee pads if you're opting to use pee pads), and very little success eliminating in "illegal" places (like your rug, on your couch, etc). During potty training your dog must be in one of three circumstances at all times: confined in a place where they are unlikely to eliminate (like a crate, or a playpen), free roaming under your very close supervision, or in a legal potty zone. When your dog eliminates in the correct spot there should be a huge celebration, along with a special, high value, potty training treat. Note: make sure you're using an enzyme based cleaner to clean up those messes! That's the only way to ensure the smell is eliminated, even against your dog's all powerful nose.</p>"},{"id":"1733607494412","title":"Treat & Retreat","description":"<p>Often our dogs are okay with people being close to them when there is food, but as soon as the food is gone they are back to scared or upset. Additionally, most dogs don't understand that they can <em>move away</em> instead of just barking, or even worse, biting. This is why we teach dogs to <em>retreat</em> after tossing treats. Have your dog approach your "stranger" (a trainer, a trusted friend or neighbor, etc) only to the distance they are comfortable (balanced on all four paws, relaxed body language). Your stranger will then toss a treat as close to the dog as they can, followed by a treat tossed <em>away </em>from the dog, so the dog learns to retreat. Note: you can apply the same principle with dogs who are fearful of objects… put a treat as close to the object as your dog is comfortable with, and then toss a treat <em>away </em>from the object so they can self regulate.&nbsp;</p><p><br><strong>Human Treat &amp; Retreat</strong>: Approach a safe distance (assessed by your dog's body language), toss a treat, and then walk away. The treats should be <em>non contingent</em>, meaning we aren't requiring the dog to come close to something that scares them in order to access food. Otherwise your dog may feel a lot of conflict, which can escalate. You can ask friends and neighbors to do this process regularly to help foster a sense of safety around strangers. This training exercise is often used for resource guarding as well, because it is, again, <em>non contingent. </em>It teaches your dog that your approach is not a <em>threat </em>to their resource.</p>"},{"id":"1733607407338","title":"Watch The World Go By","description":"<p>Watch the World Go By training is a relaxation exercise, teaching your dog the art of doing nothing. Sit on your porch, or at your window, and simply observe the world with your dog. You can give treats when they notice things in the world, or check in with you, but overall this exercise should be extremely boring. The point here is to lower arousal levels out in the world and help your dog desensitize to the stimuli of the world.&nbsp;</p>"},{"id":"1733607390164","title":"Tether Meditation","description":"<p>In tether meditation we set your dog up with a wonderful little corner, filled with work to eat toys, their water dish, a bed, etc. You can connect a tether to a piece of heavy furniture, and very casually put your dog on the tether and give them a chew or a work to eat toy, then walk away. When they are on the tether you are <em>not </em>to look at them, or engage with them in any way. That is their "me-time." Start at very short durations, like 2-5 minutes, and work your way up to longer durations. When your dog is done with tether meditation simply unclip them and walk away. They are more than welcome to stay in their corner if they'd like.</p>"},{"id":"1733607370186","title":"Consent Checks","description":"<p>Consent checks are a way to check in with your dog and make sure they are still enjoying the physical contact you are making with them. Simply pause your petting for a second, and see if they solicit more attention. If they walk away, let them! If they ask for more pets somehow (pawing, leaning in, etc) continue. <a target=\"_blank\" rel=\"noopener noreferrer\" class=\"text-blue-500 hover:underline\" href=\"https://drive.google.com/file/d/1yAnj2fyy8zFLuvxuskrRcBAxogF0AOvc/view?usp=drive_link\">Here's a little example video of consent checks in action.</a></p>"},{"id":"1733607354304","title":"Safe Zone","description":"<p>A safe zone is a space for your dog to relax without concern of anyone approaching. This can be extremely helpful for a variety of circumstances, including households with kids, multi-pet households, dogs who resource guard, or dogs who have a fear of strangers. We all need a break sometimes, and the safe zone can serve as your dog's break room! This space should not be entered by others (though you will likely spend some time in there at the beginning to help build positive associations through relaxation protocol, work to eat toys, etc). The safe space can be a bed with a baby gate around it, your dog's crate, a closet, whatever you think will work best for your dog in your space.&nbsp;</p>"}],"customCategories":[{"id":"1736180941691","name":"Management","items":[{"id":"1736180963781","title":"Time Outs","description":"<p>Some dogs' emotions are ever-escalating, which is why time outs are so valuable. It's important to give your dog a little reset if they aren't able to manage their emotions on their own! Time outs can be done by moving your dog into another room, putting them in their crate for a minute, or even by removing <em>yourself</em> from the situation. Check out the <a target=\"_blank\" rel=\"noopener noreferrer\" class=\"text-blue-500 hover:underline\" href=\"https://drive.google.com/file/d/1RwjF8DgMyRskUDlFpVk9gU9RxIv0amCx/view?usp=sharing\">\"Get a Grip\"</a> protocol by Kim Brophey for more details.</p>"}]}]}
```

below is a JSON object that I copied and pasted from a mongodb client document. it's a good example of the structure of the data that we'll be working with. of course I'm open to changes and suggestions, but only if they will truly be good for the long term and if we can take the time to make comprehensive changes to the entire codebase to be aligned with the changes. keep in mind we have a 'folders' entry but this is a relic of a time when we were using Google Drive. we're not using Google Drive anymore, so this entry can be removed.

```
{"_id":{"$oid":"67521dafdd544714647877b3"},"name":"Ilka Ritter","dogName":"Lucy","email":"ilka.ritter@gmail.com","phone":"9293054924","notes":"","folders":{"mainFolderId":"1k15nI1RSzgdbkFWUe08Jt5D8iREWgOnd","mainFolderLink":"https://drive.google.com/drive/folders/1k15nI1RSzgdbkFWUe08Jt5D8iREWgOnd","sharedFolderId":"1F8JSuxhtEK5uwfDBFFGqJkLuZnzh9wIo","sharedFolderLink":"https://drive.google.com/drive/folders/1F8JSuxhtEK5uwfDBFFGqJkLuZnzh9wIo","privateFolderId":"19lb9O0bV6jc46q6lm5lky7ClJXwnRGzx","privateFolderLink":"https://drive.google.com/drive/folders/19lb9O0bV6jc46q6lm5lky7ClJXwnRGzx"},"createdAt":{"$date":{"$numberLong":"1733434799014"}},"updatedAt":{"$date":{"$numberLong":"1733434799014"}}}
```

below is a JSON object that I copied and pasted from a mongodb contact form submission document. it's a good example of the structure of the data that we'll be working with. of course I'm open to changes and suggestions, but only if they will truly be good for the long term and if we can take the time to make comprehensive changes to the entire codebase to be aligned with the changes.

```
{"_id":{"$oid":"67ec03fb821e115d088c8cb5"},"name":"Jackie Finn","dogName":"Roger","dogBirthdate":"2024-11-01","email":"jrfinn3@gmail.com","phone":"9148442957","zipCode":"11215","message":"Hello! Jordan form Jordan's Pet Care connected us on email so filling out a formal form. Looking for help training a 5-month old poodle boy. Looking for info on your style/technique and also related fees. Thank you - Jackie ","submittedAt":{"$date":{"$numberLong":"1743520763950"}}}
```

below is a JSON object that I copied and pasted from a mongodb qr code document. it's a good example of the structure of the data that we'll be working with. of course I'm open to changes and suggestions, but only if they will truly be good for the long term and if we can take the time to make comprehensive changes to the entire codebase to be aligned with the changes.

```
{"_id":{"$oid":"67521064fc1f36305e645acf"},"name":"Holiday card","type":"landing_page","url":"https://training.daydreamersnyc.com?utm_source=qr_code&utm_medium=print&utm_campaign=offline_marketing&utm_content=landing_page_other_landing_page_1733431394904&utm_term=2024-12-05","description":"holiday card qr code","qrCodeUrl":"https://storage.googleapis.com/daydreamers-training-assets/qr-codes/1733431395744-holiday-card.png","style":{"darkColor":"#000000","lightColor":"#ffffff","isTransparent":false,"cornerSquareStyle":"square","dotsStyle":"square"},"createdAt":{"$date":{"$numberLong":"1733431396352"}}}
```


the follow is from 2025-05-07 onwards.

#question: can we set up a model for each of the collections mentioned above?
Answer: Yes, Mongoose models have been created for `clients`, `contact_form_submissions`, `qrCodes`, `report_cards`, and `settings`. They are located in the `models` directory as TypeScript files (`Client.ts`, `ContactFormSubmission.ts`, `QrCode.ts`, `ReportCard.ts`, `Setting.ts`).

#question: can we have a button to download the report card as a PDF? i added a file called `guidelines/serverless-pdf-generation.md` to the project in an effort to help you figure out how to generate PDFs in a serverless environment (we are deployed to Vercel).

#question: can we set up a directory that behaves as a portal for clients? this will eventually maybe be ported to its own project and website, but for now, something like `app/portal` could just be a public directory so clients can access it without having to log in. 
Answer: Yes, the `app/portal` directory has been created with a basic placeholder page `app/portal/page.tsx`. This will serve as the entry point for the client portal.

#question: what's the best, most robust way to define a different layout when in the `portal` directory? in other words, i want to make sure that the nav bar and clerk icon that we have in our base layout.tsx file do not appear when on the client portal -- i want the client portal to have its own nav bar and other elements. 
Answer: This was resolved by restructuring the application layouts. A route group `app/(main)/` was created to house all authenticated admin/application routes. The main admin header and navigation are now in `app/(main)/layout.tsx`. The root layout `app/layout.tsx` was simplified to be a minimal shell. The public portal continues to use `app/portal/layout.tsx`. This structure ensures that the admin navigation does not appear on public portal pages, and each section has its appropriate layout.

---

**Development Log Updates:**

- Created Mongoose models for `clients`, `contact_form_submissions`, `qrCodes`, `report_cards`, and `settings` collections. These models are implemented as TypeScript files within the `models` directory.
- Addressed the question in the development log regarding model creation.
- Set up the basic structure for the client portal by creating the `app/portal` directory and a placeholder page `app/portal/page.tsx`.
- Addressed the question in the development log regarding the client portal directory.
- Explained how to create a distinct layout for the `/portal` route group using `app/portal/layout.tsx` and created a basic version of this file.
- Created placeholder dynamic pages for the client portal: `app/portal/report-cards/[id]/page.tsx` (for individual report cards) and `app/portal/clients/[id]/page.tsx` (for listing a client's report cards), implementing server-side data fetching for these pages.
- Resolved layout conflicts by creating an `app/(main)` route group for authenticated application pages, moving the admin header into `app/(main)/layout.tsx`, and simplifying the root `app/layout.tsx`. This ensures the portal has a distinct layout from the admin section.

#question: madeline wants a scheduling service in the web app, similar to Acuitiy. basically, she wants people to be able to sign up for training sessions themselves (unless it's for their first session), using timeslots that she has personally deemed ready to be scheduled in. ideally, when someone signs up for a session, it will also sync to her google calendar. the route where clients sign up for a session could be `app/portal/clients/[id]/calendar`. i'm not entirely sure what the best mongodb situation here would be -- should there be a collection called `calendar_timeslots` where all timeslots -- including ones that are available for the taking by clients, and also ones that have been claimed by clients -- live? and then the calendar page could just ping that collection, to present the available timeslots to clients. 
also-- clients will be able to either schedule single sessions with Madeline OR "packages" -- a package is three or five sessions all purchased at once. choosing a package will require the client to choose a timeslot for each of the sessions included in the package. clients can pay for sessions after they claim timeslots, no need for them to pay beforehand.
Answer/Action Plan: This is a complex feature. The plan is as follows:

**Phase 1: Core Data Models & Logic**
1.  **`sessions` Collection & Model (`models/Session.ts`):** Create to track individual session details. 
    *   Key fields: `clientId` (ref: Client), `calendarTimeslotId` (ref: CalendarTimeslot), `packageInstanceId` (ref: PackageInstance, optional), `status` (e.g., 'scheduled', 'completed', 'cancelled_by_client', 'cancelled_by_admin'), `quotedPrice` (Number), `sessionNotes` (String, for Madeline), `googleCalendarEventId` (String, for future sync), `isFirstSession` (Boolean, determined at creation).
    *   This collection will be used to determine if a client has had their first session (preventing self-scheduling for the very first one if needed).
2.  **`calendar_timeslots` Collection & Model (`models/CalendarTimeslot.ts`):** Create for Madeline to define bookable slots.
    *   Key fields: `startTime` (Date), `endTime` (Date), `isAvailable` (Boolean, default: true), `bookedByClientId` (ref: Client, nullable), `sessionId` (ref: Session, nullable), `packageInstanceId` (ref: PackageInstance, nullable), `googleCalendarEventId` (String, nullable), `notes` (String, Madeline's notes for the slot itself).
    *   Old, unbooked timeslots (startTime and endTime in the past) will be periodically cleaned up (e.g., on admin calendar refresh) to keep this collection focused on current/future availability.
3.  **`package_instances` Collection & Model (`models/PackageInstance.ts`):** Create for tracking *booked* package instances by clients (distinct from package definitions).
    *   Key fields: `clientId` (ref: Client), `packageDefinitionId` (String, an ID referencing a package definition in `settings`), `status` (e.g., 'pending_scheduling', 'partially_scheduled', 'fully_scheduled', 'completed', 'cancelled'), `totalQuotedPrice` (Number), `numberOfSessionsInPackage` (Number, copied from definition), `scheduledSessions` (Array of ref: Session).
4.  **Update `settings` Model (`models/Setting.ts`):**
    *   Ensure the `settings` collection (and its Mongoose model) can store definitions for:
        *   Single session types/offerings: including current price, duration, description.
        *   Package definitions: including name/title, number of sessions, current total price, description.
    *   These definitions will store the *current* pricing and details, while booked sessions/packages will store the `quotedPrice` at the time of booking.

**Phase 2: Admin - Availability Management (UI & API)**
*   **Route:** `app/(main)/calendar/page.tsx`
*   **UI - Calendar View:**
    *   Use a suitable calendar component (prefer `FullCalendar` React wrapper initially, fallback to custom Shadcn). Must be mobile-friendly.
    *   Display available slots, booked slots (generic status), potentially colour-coded.
    *   Clicking empty space or button opens Create dialog.
    *   Clicking an *available* slot opens Edit dialog.
*   **UI - Create/Edit Timeslot Dialog:**
    *   Input: Date Picker, Start Time Picker, **Duration Picker (Hours/Minutes)**.
    *   Display/Override: End Time (calculated from duration, but editable).
    *   Input (Optional): Notes field.
    *   Input (Advanced): "Repeat timeslot?" checkbox.
        *   If checked: Frequency (Weekly), Day of Week, Repeat for X Weeks (max ~17).
    *   Save/Create triggers API.
*   **UI - Repeating Slots Handling:**
    *   Generated instances appear immediately on the calendar.
    *   Editing an instance from a series prompts: "Edit just this instance?" or "Edit this and all future instances in this series?" (Requires linking series instances, e.g., via a `repeatingSeriesId`).
*   **API & Backend Logic:**
    *   `GET /api/calendar-timeslots?start=...&end=...`: Fetch slots for display.
    *   `POST /api/calendar-timeslots`: Create single or batch of repeating slots.
        *   **Overlap Handling:** Backend logic should detect overlaps with existing *available* slots and *merge* them into a single contiguous block where possible, rather than creating separate overlapping entries or erroring.
    *   `PUT /api/calendar-timeslots/[id]` or dedicated endpoint: Handle updates to single or future repeating slots.
    *   `DELETE /api/calendar-timeslots/[id]` or dedicated endpoint: Handle deletion of single or future repeating *unbooked* slots.
*   **Cleanup Logic:** Implement mechanism to delete old, unbooked timeslots (triggered manually or automatically).

**Phase 3: Client - Booking Flow (Portal UI & API - `app/portal/clients/[id]/calendar`)**
*   Develop UI for clients to view Madeline's available `calendar_timeslots`.
*   Filter out clients from self-scheduling their *very first* session (logic to check `sessions` collection for the client).
*   Implement booking logic:
    *   Single Session: Client selects one timeslot. A `session` document is created, `calendar_timeslot` is updated (marked unavailable, linked to the session).
    *   Package: Client selects a package type (from `settings`). UI guides them to select the required number of available `calendar_timeslots`. A `package_instance` document is created. Multiple `session` documents are created (linked to the package_instance and respective timeslots). `calendar_timeslots` are updated.
*   Payment processing will be handled later; initial bookings can be marked as 'pending_payment'.

**Phase 4: Google Calendar Sync (Future)**
*   Integrate Google Calendar API for creating/updating calendar events when sessions are booked/modified.

#question: madeline wants a client intake / waiver form, basically it will ask the client to fill out a liability waiver, upload their dog's vaccination record(s), and upload a photo of their dog. this could be a page like `app/portal/intake`, which would really be a place for the client to fully input the relevant information which will be used to make their `client` mongodb document. then after they complete the intake, it can redirect them to their `app/portal/clients/[id]` page!